<ion-view view-title="Mi Comunidad">
  <ion-nav-buttons side="right">
    <button class="button button-icon button-positive button-clear ion-ios-compose-outline" ng-click="showNewPostModal()"></button>
  </ion-nav-buttons>

  <ion-content>
    <ion-refresher pulling-text="Pull to refresh..." on-refresh="refresh()"></ion-refresher>

 
    <ion-item ng-if="posts.length == 0" class="text-center">
      <h2>No posts found. Try pulling down to refresh.</h2>
    </ion-item>

    <div class="list card post" ng-repeat="post in posts">
      <div class="item item-avatar">
        <img src="{{post.base64_user_photo}}">
        <h2>{{post.user.display_name}}</h2>
        <p>{{post.timestamp}}</p>
      </div>

      <div class="item item-body">
        <img class="full-image" src="{{post.photo}}" ng-if="!!post.photo">
        <p ng-bind-html="post.content | denguechatLinky"></p>
        <p>
          <a href="#" class="subdued" ng-click="toggleLike(post)">
            <i class="icon ion-android-favorite-outline" ng-if="!post.liked"></i>
            <i class="icon ion-android-favorite assertive" ng-if="!!post.liked"></i>
          </a>
          <!-- <a href="#" class="subdued">5 Comments</a> -->
        </p>
      </div>
    </div>

    <ion-infinite-scroll immediate-check="false" ng-if="state.hasMoreData" on-infinite="loadMore()" distance="1%"></ion-infinite-scroll>

  </ion-content>
</ion-view>
